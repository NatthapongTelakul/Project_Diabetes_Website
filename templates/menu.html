<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>SugarFree - Menu</title>
  <link rel="stylesheet" href="style-menu.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body>
  <header>
    <div class="logo">
      <h1>
        SugarFree
        <span class="subtitle">AI Diabetes Screening</span>
      </h1>
    </div>
    <!-- ข้อความ Welcome (ดึงชื่อจาก localStorage ถ้ามี) -->
    <div class="welcome" id="welcome">Welcome</div>

    <form class="search" role="search" onsubmit="event.preventDefault();">
      <input id="q" type="search" placeholder="Search…" aria-label="Search">
      <button type="submit" aria-label="Search"><i class="fa fa-search"></i></button>
    </form>

    <nav class="tabbar" id="tabbar">
      <span class="tab-notch" aria-hidden="true"></span>
      <span class="tab-indicator" aria-hidden="true"></span>

      <button class="tab" data-tab="home" aria-label="Home" onclick="location.href='home.html'">
        <i class="fa fa-home"></i>
      </button>
      <button class="tab" data-tab="calendar" aria-label="Calendar" onclick="location.href='calendar.html'">
        <i class="fa fa-calendar"></i>
      </button>
      <button class="tab" data-tab="profile" aria-label="Profile" onclick="location.href='profile.html'">
        <i class="fa fa-user"></i>
      </button>
      <!-- หน้านี้คือ menu ⇒ active -->
      <button class="tab is-active" data-tab="menu" aria-label="Menu" onclick="location.href='menu.html'">
        <i class="fa fa-bars"></i>
      </button>
    </nav>
  </header>

  <main class="page">
    <section class="card"> </section>
  </main>

  <script>
     // แสดงชื่อผู้ใช้แบบตัดโดเมนหลัง '@'
    window.addEventListener('load', () => {
      const raw = localStorage.getItem('userEmail') || 'Guest';
      const nameOnly = raw.includes('@') ? raw.split('@')[0] : raw;
      document.getElementById('welcome').textContent = `Welcome, ${nameOnly}`;
    });
    // วาง indicator + notch ที่แท็บ Menu
    (function(){
      const bar = document.getElementById('tabbar');
      const indicator = bar.querySelector('.tab-indicator');
      const notch = bar.querySelector('.tab-notch');
      const tabs = Array.from(bar.querySelectorAll('.tab'));
      const current = bar.querySelector('.tab.is-active') || tabs[0];

      function moveTo(el){
        const r = el.getBoundingClientRect();
        const br = bar.getBoundingClientRect();
        const centerX = r.left + r.width/2 - br.left;
        indicator.style.transform = `translateX(${centerX - indicator.offsetWidth/2}px)`;
        notch.style.transform = `translateX(${centerX - notch.offsetWidth/2}px)`;
      }

      window.addEventListener('load', ()=>moveTo(current));
      window.addEventListener('resize', ()=>moveTo(current));
    })();
  </script>
</body>
</html>
