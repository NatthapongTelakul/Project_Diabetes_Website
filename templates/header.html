<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Header</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style-header.css') }}">
</head>
<body>
    <header>
        <div class="logo">
        <h1>
            SugarFree
            <span class="subtitle">AI Diabetes Screening</span>
        </h1>
        </div>

        <!-- ข้อความ Welcome (ดึงชื่อจาก localStorage ถ้ามี) -->
        <div class="welcome" id="welcome">Welcome</div>

        <!-- Navigation bar: ปุ่มจะพาไปไฟล์ .html ของแต่ละหน้า -->
        <nav class="tabbar" id="tabbar">
        <span class="tab-notch" aria-hidden="true"></span>
        <span class="tab-indicator" aria-hidden="true"></span>
        
        <!-- หน้านี้คือ home ⇒ ใส่ is-active -->
        <button class="tab is-active" data-tab="home" aria-label="Home" onclick="location.href='home.html'">
            <i class="fa fa-home" aria-hidden="true"></i>
        </button>
        <button class="tab" data-tab="calendar" aria-label="Calendar" onclick="location.href='calendar.html'">
            <i class="fa fa-calendar" aria-hidden="true"></i>
        </button>
        <button class="tab" data-tab="profile" aria-label="Profile" onclick="location.href='profile.html'">
            <i class="fa fa-user" aria-hidden="true"></i>
        </button>
        <button class="tab" data-tab="menu" aria-label="Menu" onclick="location.href='menu.html'">
            <i class="fa fa-bars" aria-hidden="true"></i>
        </button>
        </nav>
    </header>
    <main>
        {% block content %}
        <!-- Content will be injected here -->
        {% endblock %}
    </main>

    <script>
      // แสดงชื่อผู้ใช้แบบตัดโดเมนหลัง '@'
      window.addEventListener('load', () => {
        const raw = localStorage.getItem('userEmail') || 'Guest';
        const nameOnly = raw.includes('@') ? raw.split('@')[0] : raw;
        document.getElementById('welcome').textContent = `Welcome, ${nameOnly}`;
      });
    </script>
</body>
</html>